var app=angular.module("app",["ngRoute"]);app.config(function(t){t.when("/",{templateUrl:"/home",controller:"home",controllerAs:"home"}).when("/favorites",{templateUrl:"/favorites",controller:"favorites",controllerAs:"favorites"})});const apiKey="c8926c6972819f964744dd55e0ecf582",baseUrl="https://api.themoviedb.org/3/movie/";var http;class Movies{constructor(t){http=t,this.favorites=this.getFavorites(),this.favorites||localStorage.setItem("favorites","[]")}showOnlyFavorites(){this.list=this.favorites}search(t){http.get(`${baseUrl+t}?api_key=${apiKey}`).then(t=>{let e=this.getFavorites();this.list=t.data.results,console.log(this.list),this.list.forEach(t=>{e.forEach(e=>{e.title===t.title&&(t.favorited=!0)}),t.starsFilled=[],t.starsFilled.length=Math.round(Math.round(t.vote_average)/2),t.starsNotFilled=[],t.starsNotFilled.length=5-t.starsFilled.length})})}checkSaveFavorite(t,e){t.favorited?this.removeFavorite(t):this.saveFavorite(t,e)}saveFavorite(t,e){let r=this.getFavorites();r.push(t),t.favorited=!0,t.filter=e,this.favorites=r,localStorage.setItem("favorites",JSON.stringify(r))}removeFavorite(t){let e=this.getFavorites();e.forEach((r,s)=>{r.title===t.title&&e.splice(s,1)}),t.favorited=!1,this.favorites=e,localStorage.setItem("favorites",JSON.stringify(e))}getFavorites(){return JSON.parse(localStorage.getItem("favorites"))}}app.factory("movies",Movies);class Favorites{constructor(t){this.movies=t,this.currentFilter={filterName:"All",filter:"all"},this.movies.showOnlyFavorites()}filterFavs(t,e){this.currentFilter={filter:t,filterName:e},this.showFilters=!1}}app.controller("favorites",Favorites);class Header{constructor(t){this.activeRoute=t.$$url.substr(1)||"home"}}app.controller("header",Header);class Home{constructor(t){this.movies=t,this.currentFilter={filterName:"Now Playing",filter:"now_playing"},this.movies.search("now_playing")}getMovies(t,e){this.currentFilter={filterName:e,filter:t},this.showFilters=!1,this.movies.search(t)}}app.controller("home",Home);